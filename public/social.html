<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Social Media App</title>
  <link rel="stylesheet" href="./styles/socials.css">
  <link rel="icon" type="image/png" href="./assets/logo.png">
</head>
<body>
  <!-- Navigation Bar -->
  <nav id="navbar">
    <div class="nav-left">
      <h1>Social Media App</h1>
    </div>
    <div class="nav-right">
      <button id="registerBtn" onclick="toggleRegister()">Register</button>
      <button id="loginBtn" onclick="toggleLogin()">Login</button>
      <button id="profileBtn" onclick="toggleProfile()" style="display:none;">Profile</button>
      <button id="logoutBtn" onclick="logoutUser()" style="display:none;">Logout</button>
    </div>
  </nav>

  <!-- Message Box for inline notifications -->
  <div id="messageBox" style="display:none;"></div>

  <!-- Main Container -->
  <div class="container">
    <!-- Posts Section (Left Column) -->
    <div class="posts-section">
      <!-- Create Post (visible after login) -->
      <div id="postForm" style="display:none;">
        <h2>Create a New Post</h2>
        <textarea id="postContent" placeholder="What would you like to share?"></textarea>
        <button onclick="createPost()">Post</button>
      </div>
      <h2>Posts</h2>
      <div id="posts"></div>
    </div>

    <!-- Dashboard (Right Column) -->
    <div id="userProfile" class="dashboard">
      <h3>Profile</h3>
      <img id="profilePicture" src="default-profile.jpg" alt="Profile Picture">
      <p><strong>Username:</strong> <span id="username">Loading...</span></p>
      <p><strong>Bio:</strong> <span id="bio">No bio set</span></p>
      <p><strong>Followers:</strong> <span id="followers">0</span></p>
      <p><strong>Following:</strong> <span id="following">0</span></p>
      <input type="text" id="newBio" placeholder="New bio (max 20 characters)">
      <button onclick="updateBio()">Update Bio</button>
      <br>
      <input type="file" id="profileUpload">
      <button onclick="uploadProfilePicture()">Upload Profile Picture</button>
    </div>
  </div>

  <!-- Registration Modal -->
  <div id="registerForm" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="toggleRegister()">&times;</span>
      <h2>Register</h2>
      <input type="text" id="registerUsername" placeholder="Username">
      <input type="email" id="registerEmail" placeholder="Email">
      <input type="password" id="registerPassword" placeholder="Password">
      <button onclick="registerUser(
        document.getElementById('registerUsername').value, 
        document.getElementById('registerEmail').value, 
        document.getElementById('registerPassword').value)">Register</button>
    </div>
  </div>

  <!-- Login Modal -->
  <div id="loginForm" class="modal" style="display:none;">
    <div class="modal-content">
      <span class="close" onclick="toggleLogin()">&times;</span>
      <h2>Login</h2>
      <input type="email" id="loginEmail" placeholder="Email">
      <input type="password" id="loginPassword" placeholder="Password">
      <button onclick="loginUser(
        document.getElementById('loginEmail').value, 
        document.getElementById('loginPassword').value)">Login</button>
    </div>
  </div>

  <!-- Script Files -->
  <!-- Voeg eerst het messages script toe zodat displayMessage() beschikbaar is -->
  <script src="scripts/socials/messages.js"></script>
  <script src="scripts/socials/auth.js"></script>
  <script src="scripts/socials/user.js"></script>
  <script src="scripts/socials/post.js"></script>
  <script src="scripts/socials/comment.js"></script>
  <script src="scripts/socials/vote.js"></script>
  <script>
    // Toggle registration modal display
    function toggleRegister() {
      const registerForm = document.getElementById("registerForm");
      registerForm.style.display = (registerForm.style.display === "none" || registerForm.style.display === "") ? "flex" : "none";
    }
    // Toggle login modal display
    function toggleLogin() {
      const loginForm = document.getElementById("loginForm");
      loginForm.style.display = (loginForm.style.display === "none" || loginForm.style.display === "") ? "flex" : "none";
    }
    // Toggle profile dashboard display (default hidden)
    function toggleProfile() {
      const profile = document.getElementById("userProfile");
      profile.style.display = (profile.style.display === "none" || profile.style.display === "") ? "block" : "none";
    }
    // Expose toggle functions globally
    window.toggleRegister = toggleRegister;
    window.toggleLogin = toggleLogin;
    window.toggleProfile = toggleProfile;
  </script>
</body>
</html>
